
<form class="max-w-6xl mx-auto p-6 bg-white shadow-md rounded-lg" (ngSubmit)="onSubmit()" #form="ngForm">
    <div class="flex mb-6">
        
        <div class="mx-auto bg-white shadow-lg border border-gray-300 rounded-lg overflow-hidden flex justify-between p-5">
            @for (step of steps;track step; let i = $index) {
                <div class="flex justify-between ml-2 ">
                    <div class="p-0 ">
                        @if(step == 'Revisando') {
                            <button class="bg-pink-500 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-pink-600">
                                <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </button>
                        }
                        @if(step == 'Conhecendo o helpinho') {
                            <button class="bg-pink-500 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-pink-600">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
                                </svg>
                            </button>
                        }
                        @if(step == 'Metas do helpinho') {
                            <button class="bg-pink-500 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-pink-600">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                                </svg>
                            </button>
                        }
                        @if(step == 'Categoria do helpinho') {
                            <button class="bg-pink-500 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-pink-600">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M6 6h.008v.008H6V6Z" />
                                </svg>
                            </button>
                        }
                        
                    </div>
                    
                    @if(currentStep == i) {
                        <div class="ml-2">
                            <p>Passo {{i + 1}}/4</p>
                            <p class="text-gray-500">{{step}}</p>
                        </div>
                    }
                    <div class="w-1 bg-gray-100 ml-3"></div>
                </div>
            }
        </div>
    </div>
  
    @if(currentStep === 0){
        <div class="space-y-4">   
            <h2 class="text-xl font-semibold">Em que categoria se encaixa seu helpinho ?</h2>
            <h6>Escolha pelo menos uma das categorias abaixo que represente seu Helpinho</h6>
            <form>
                <div class="grid grid-cols-1 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 gap-4 p-6">
                    @for (categoria of categorias;track categoria; let i = $index) {
                        <div class="max-w-sm mx-auto bg-white shadow-lg border border-pink-300 rounded-lg overflow-hidden flex-fill flex-initial">
                           
                            <div class="p-6 " style="width: 170px;" height="50px">
                                <p class="text-center">{{categoria}}</p><br>
                                @if(categoria == 'Hospitalar') {
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819" />
                                    </svg>
                                }
                                @if(categoria == 'Emergencia') {    
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="m6.115 5.19.319 1.913A6 6 0 0 0 8.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 0 0 2.288-4.042 1.087 1.087 0 0 0-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 0 1-.98-.314l-.295-.295a1.125 1.125 0 0 1 0-1.591l.13-.132a1.125 1.125 0 0 1 1.3-.21l.603.302a.809.809 0 0 0 1.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 0 0 1.528-1.732l.146-.292M6.115 5.19A9 9 0 1 0 17.18 4.64M6.115 5.19A8.965 8.965 0 0 1 12 3c1.929 0 3.716.607 5.18 1.64" />
                                    </svg>
                                }
                                @if(categoria == 'Música'){
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z" />
                                    </svg>
                                }
                                @if(categoria == 'Reforma') {
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                                    </svg>
                                }
                                @if(categoria == 'Jogos') {
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                                    </svg>
                                }
                                @if(categoria == 'Saude') {
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                                    </svg>
                                }
                            </div>
                        </div>
                    }
                </div>
                <div class="flex justify-between">
                    <p></p>
                    <button type="button" (click)="nextStep()" class="py-2 px-4 bg-pink-500 text-white rounded">
                    Próximo
                    </button>
                </div>
            </form>
        </div>
    }
  
    @if(currentStep === 1){

        <div class="space-y-4">
            <h2 class="text-xl font-semibold">Fale um pouco mais</h2>
            <h6>Escreva mais detalhes sobre seu helpinho, não economize as palavras.</h6>
            <form>
                <div class="flex flex-col space-y-4">
                    <label class="flex flex-col">
                        Título do helpinho
                        <input type="text" class="mt-1 p-2 border border-gray-300 rounded"  #titleField="ngModel" [(ngModel)]="title" name="titulo"/>
                        <div *ngIf="titleField.invalid && titleField.touched" class="error">
                            O título é obrigatório.
                        </div>
                    </label>
                    <div class="flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50">
                        <label class="cursor-pointer">
                            <span class="block text-gray-700 font-semibold">Selecione</span>
                            <input type="file"  class="hidden" (change)="onFileSelected($event)"/>
                        </label>
                        <!-- <input id="image" type="file" (change)="onFileSelected($event)" /> -->
                        <div *ngIf="!image" class="error">
                          A imagem é obrigatória.
                        </div>
                        <p class="mt-2 text-gray-500">ou arraste uma foto para representar seu helpinho, SVG, PNG, JPG ou GIF (max: 800x400)</p>
                    </div>
                    <label class="flex flex-col">
                        Descrição
                    </label>
                    <textarea type="text" rows="10" class="mt-1 p-2 border border-gray-300 rounded" [(ngModel)]="description" #descriptionField="ngModel" name="descricao"></textarea>
                    <div *ngIf="descriptionField.invalid && descriptionField.touched" class="error">
                            A descrição é obrigatória e deve ter entre 10 e 500 caracteres.
                        </div>
                    <div class="flex justify-end">
                        <button 
                            (click)="prevStep()" 
                            type="button"
                            class="bg-white text-black border border-gray-300 px-4 py-2 rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-1">Voltar
                        </button>
                        <button type="button" (click)="nextStep()" class="py-2 px-4 bg-pink-500 text-white rounded">
                        Continuar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    }

    @if(currentStep === 2){

        <div class="space-y-4">
            <h2 class="text-xl font-semibold">Quanto você precisa ?</h2>
            <p>Defina a meta que você quer alcançar seu helpinho.</p>
            <form>
                <div class="grid grid-cols-1 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 gap-4 p-6">
                    @for (valor of valores;track valor; let i = $index) {
                        <div class="max-w-sm mx-auto bg-white shadow-lg border border-pink-300 rounded-lg overflow-hidden flex-fill flex-initial">
                            <div class=" flex justify-start">
                                <div class="p-6">
                                    @if(valor == 5000 || valor == 2000|| valor == 1000){
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                                        </svg>
                                        {{ valor | number  }}
                                    }
                                    @if(valor == 100000 || valor == 200000){
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="size-6">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                                        </svg>
                                          
                                        {{ valor | number  }}
                                    }
                                    <br>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="flex justify-end">
                    <button 
                        (click)="prevStep()" 
                        type="button"
                        class="bg-white text-black border border-gray-300 px-4 py-2 rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-1">Voltar
                    </button>
                    <button type="button" (click)="nextStep()" class="py-2 px-4 bg-pink-500 text-white rounded">
                    Continuar
                    </button>
                </div>
            </form>
        </div>
    }

    @if(currentStep === 3){
        <div class="flex flex-col space-y-4">
            <h2 class="text-xl font-semibold">Falta pouco...</h2>
            <p>Revise seu helpinho, veja se está como você gostaria antes de publica-lo para todos.</p>
            <textarea type="text" cols="10" rows="15" height="1000px" class="mt-1 p-2 border border-pink-300 rounded bg-pink-100" name="city"></textarea>

            <div class="flex justify-end">
                <button 
                    (click)="prevStep()" 
                    type="button"
                    class="bg-white text-black border border-gray-300 px-4 py-2 rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-1">Voltar
                </button>
                
                <button type="submit" class="py-2 px-4 bg-pink-500 text-white rounded">
                Publicar Helpinho
                </button>
            </div>
        </div>
    }
</form>
